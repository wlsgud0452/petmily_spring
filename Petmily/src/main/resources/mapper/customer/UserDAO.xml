<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTO 3.0//EN"
						"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
						
<mapper namespace="com.petmily.customer.dao.UserDAO">
	
	<select id="userPwCheck" resultType="Integer">
		select count(*) from user where uid = #{uid} and upw = #{upw}
	</select>
	
	<select id="login" resultType="com.petmily.customer.dto.UserDTO">
		select count(*), uid , uname, utype, uimage from user where uid = #{uid} and upw = #{upw}
	</select>
	
	<insert id="insert">
		insert into user (uid,upw,uname,uphone,uemail,unickname,uaddress, utype, uimage , uinitdate) 
		values 
		(#{uid} , #{upw} , #{uname} , #{uphone} , #{uemail} , #{unickname} , #{uaddress} , #{utype} ,#{uimage} , now())
	</insert>
	
	
	<select id="registerCheck" resultType="Integer">
		select count(*) from user where uid = #{uid}
	</select>
	
	<select id="userInfo" resultType="com.petmily.customer.dto.UserDTO">
		select uname, uemail, uphone, uaddress, unickname, uimage from user where uid = #{uid}
	</select>
	
	<select id="selectImage" resultType="String">
		select uimage from user where uid = #{postingUid}
	</select>
	
	<select id="selectImageList" resultType="java.util.List" parameterType="com.petmily.customer.dto.PostingDTO">
	
		select uimage from user where uid in
		<foreach collection="commentList" item="list" open="("
				separator=" , " close=")" >
			'#{list.user_uid}'
		</foreach>
	
	</select>
	
	
</mapper>